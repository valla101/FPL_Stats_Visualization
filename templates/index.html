<!DOCTYPE html>
<html lang="en">

<head>
    <!-- CSS Bootstrap 4.0 -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- CSS stylesheet -->    
    <link rel="stylesheet" type="text/css" href="../static/css/style.css">

    <!-- Plotly -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    <!-- Jquery -->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

    <title>Premier League Statistics</title>
</head>

<body id = "body">
    <header id = "header">
        <div id="carouselSlides" class="carousel slide" data-ride="carousel" data-interval="4000">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img class="d-block w-100" src="https://cms.qz.com/wp-content/uploads/2015/02/premierleague-rights-bonanza1.jpg?quality=75&strip=all&w=1600&h=901" alt="Second slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src=" https://imgresizer.eurosport.com/unsafe/1200x0/filters:format(jpeg):focal(1377x376:1379x374)/origin-imgresizer.eurosport.com/2020/11/29/2946237-60480708-2560-1440.jpg" alt="Third slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src=" https://cloudfront-us-east-1.images.arcpublishing.com/pmn/NZE7FQXEA5EV7HXV66L6KVTR4I.jpg" alt="Fourth slide">
              </div>
            </div>
        </div>
        <a><img id = header_pic src= 'https://www.fifplay.com/img/public/premier-league-3-logo.png'></a>
        <!-- <button class="btn btn-primary" id = "dark_mode"> Dark Mode </button> -->
    </header>

    <nav class="navbar navbar-expand-lg navbar-expand-md navbar-expand-sm navbar-light">
        <ul class = "nav">
          <li class = "nav-item">
            <div class="dropdown">
              <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Shortcuts
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="nav-link" href="#player_stats">Stats for Individual Player</a>
                <a class="nav-link" href="#compare_player_stats">Compare Players</a>
                <a class="nav-link" href="#table_container">Generate Table</a>
                <a class="nav-link" href="#top_performers_chart">Top Performers by Stat</a>
                <a class="nav-link" href="#scatter_plots">Generate Scatter Plot (Stat vs Minutes Played)</a>
              </div>
            </div>
          </li>
        </ul>
      </nav>

                                    <!--  NEW CHART-->

    <!-- Player Offensive Stats Chart -->
    
    <div class = "container-fluid" id = "player_stats">
        <h1 class = "containerHeadertext">Explore Offensive Stats for Individual Player</h1>
        <div class = "container">
            <h4 class = "header_for_graph">Stats include: Total FPL Points, Goals, Expected Goals, Assists, Expected Assists and more</h4>
            <!-- Code for Filtering through all players in database -->
            <select id="playerName">
                {% for player in query_player %}
                <option>{{ player ["player"]}}</option>
                {% endfor %}
            </select>
            <br>
            <button class= "btn btn-primary filterbutton" id = "getPlayerStatsButton"> Get Player Stats! </button>
            <br>
        </div>

        <div class = "container-fluid">
            <!-- ChartJS Plot Generated Here -->
            <div>
                <canvas id="playerBarChart" width="400" height="275"></canvas>
            </div>
        </div>    
        
    </div>

                                <!--  NEW CHART-->

    <!-- Player Comparison Test Chart -->
    
    <div class = "container-fluid" id = "compare_player_stats">
        <h1 class = "containerHeadertext">Compare Offensive Stats of Two Players</h1>
        <div class="container">
            <div class = "container">
                <h4 class = "header_for_graph">Stats include: Total FPL Points, Goals, Expected Goals, Assists, Expected Assists</h4>
                <!-- Code for Filtering through all players in database -->
                <h3 class = "header_for_graph">Select a player!</h3>

                <!-- Compare Player #1 -->
                <select id="comparePlayer1">
                    {% for player in query_player %}
                    <option>{{ player ["player"]}}</option>
                    {% endfor %}
                </select>
                <br>
                <br>
                <h3 class = "header_for_graph">Compare to:</h3>
                <!-- <br> -->
                <!-- Compare Player #2 -->
                <select id="comparePlayer2">
                    {% for player in query_player %}
                    <option>{{ player ["player"]}}</option>
                    {% endfor %}
                </select>
                <br>
                <button class= "btn btn-primary filterbutton" id = "comparePlayersButton"> Compare Players! </button>
                <br>
            </div>
        </div>

        <div class = "container-fluid">
            <!-- ChartJS Plot Generated Here -->
            <canvas id="comparePlayerGraph" width="400" height="275"></canvas>
        </div>



    </div>
    <!-- End of Container -->


                        <!--  NEW TABLE (Containing Stats)-->    
     
    <!-- Price Filter Input -->
    
    <div class = "container-fluid" id = "table_container">
        <h1 class = "containerHeadertext">Generate Table</h1>
        <div id = "priceFilterContainer">
            <h2 class = "header_for_graph">Generate Table Filtered by Player Value!</h2>
            <input id = "priceFilter" placeholder="For Example: 4.5 ">
            <br>
            <button class= "btn btn-primary filterbutton" id = "priceFilterButton"> Filter by Price </button>
        </div>

        <!-- Player Position Input -->
        <div id = "positionFilterContainer">
            <h2 class = "header_for_graph">Or Generate Table Filtered by Player Position</h2>
            <select id = "queryPosition">
                {% for position in query_fpl_positions %}
                <option>{{ position ["player_position"]}}</option>
                {% endfor %}
            </select>
            <br>
            <button class= "btn btn-primary filterbutton" id = "positionButton"> Filter By Position </button>
        </div>

        <!-- Tabulator Table -->
        <div>
            <div id="playerDataTable"></div>
        </div>
    </div>

    <!-- Select Stat for All Players -->

    
    <div class = "container-fluid" id = "top_performers_chart">
        <h1 class = "containerHeadertext">Top Performers Filtered by Category</h1>
        <div class ="container">
            <h2 class = "header_for_graph">Select Stat Below</h2>
            <h4 class = "header_for_graph">Bar Graph generated in descending order</h4>
            <select id = "statsList">
                {% for a,b in zipped_columns %}
                    <option value='{{ a["name"]}}'>{{ b }}</option>
                {% endfor %}
            </select>
        </div>

        <div class = "container-fluid">
            <canvas id = "statBarGraph" width="450" height="375"></canvas>
        </div>
        
    </div>

    <!-- Testing Scatter Plot for all players -->
    
    <div class = "container-fluid" id = "scatter_plots">
        <h1 class = "containerHeadertext">Generate Scatter Plot of All Players</h1>
        <div class = "container">
            <h2 class = "header_for_graph">Select Stat Below to Build Scatter Plot</h2>
            <select id = "statsList2">
                {% for a,b in zipped_columns2 %}
                    <option value='{{ a["name"]}}'>{{ b }}</option>
                {% endfor %}
            </select>
            <button class= "btn btn-primary filterbutton" id = "scatterButton"> Filter Scatter Plot by Category</button>
            <br>
            <br>
            <select id = "teamsList">
                {% for a in teams %}
                    <option value='{{ a["team_id"]}}'>{{ a["team_id"]}}</option>
                {% endfor %}
            </select>
            <button class= "btn btn-primary filterbutton" id = "scatterButton2"> Add Team Filter Scatter Plot </button>
            <canvas id="scatter_plot" width="450" height="375"></canvas>
            <br>
            <canvas id = "scatter_plot2" width="450" height="375"></canvas>
        </div>
        
    </div>

    <div class = "container-fluid" id = "scatter_plot_positions">
        <h1 class = "containerHeadertext">Generate a Shots vs Goals Scatter Plot, Based on Player Position & Price of Current Season (Green)</h1>
        <h3 class = "container-text">Trendline Calculated from Last Season's Stats (Red)</h3>
        <div class = "container">
            <!-- <h4 class = "header_for_graph">Stats include: Total FPL Points, Goals, Expected Goals, Assists, Expected Assists and more</h4> -->
            <!-- Code for Filtering through all players in database -->
            <select id="playerNameScatter">
                {% for player in query_player %}
                <option>{{ player ["player"]}}</option>
                {% endfor %}
            </select>
            <br>
            <button class= "btn btn-primary filterbutton" id = "getPlayerStatScatterButton"> Get Player Stats! </button>
            <br>
        </div>

        <div class = "container-fluid">
            <!-- ChartJS Plot Generated Here -->
            <div>
                <canvas id="scatterPlotbyPosition_Price" width="400" height="275"></canvas>
            </div>
        </div>    
        
    </div>

    <!-- JS Capabilities -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous">
    </script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous">
    </script>
    <script src="https://d3js.org/d3.v6.min.js"></script>

    <!-- Tabulator -->
    <link href="https://unpkg.com/tabulator-tables@4.9.3/dist/css/tabulator.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.9.3/dist/js/tabulator.min.js"></script>

    <!-- Chart JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>

    <!-- Regression Chart JS -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-trendline"></script>

    <!-- Select2 -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <!-- JS Plots File -->
    <script src="../static/js/plot_test.js"></script>

    <!-- Footer -->
  <footer>
    <li>
        <!-- Button Scrolls up to Premier League Logo  -->
        <button class = "btn btn-primary filterbutton" id = "back_to_top">
            <a class="nav-link" href="#header_pic">Back to Top</a>
        </button>
    </li>
  </footer>
</body>

</html>